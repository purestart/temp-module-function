webpackJsonpbase([2],{208:function(e,t){e.exports=function(e,t,r,n,s,a){var o,i=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(o=e,i=e.default);var u="function"==typeof i?i.options:i;t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),r&&(u.functional=!0),s&&(u._scopeId=s);var c;if(a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):n&&(c=n),c){var d=u.functional,f=d?u.render:u.beforeCreate;d?(u._injectStyles=c,u.render=function(e,t){return c.call(t),f(e,t)}):u.beforeCreate=f?[].concat(f,c):[c]}return{esModule:o,exports:i,options:u}}},210:function(e,t,r){"use strict";t.__esModule=!0;var n=r(211),s=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,s.default)(e)}},211:function(e,t,r){e.exports={default:r(212),__esModule:!0}},212:function(e,t,r){r(19),r(213),e.exports=r(0).Array.from},213:function(e,t,r){"use strict";var n=r(13),s=r(3),a=r(14),o=r(80),i=r(81),l=r(47),u=r(214),c=r(49);s(s.S+s.F*!r(83)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,s,d,f=a(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,g=0,_=c(f);if(v&&(m=n(m,h>2?arguments[2]:void 0,2)),void 0==_||p==Array&&i(_))for(t=l(f.length),r=new p(t);t>g;g++)u(r,g,v?m(f[g],g):f[g]);else for(d=_.call(f),r=new p;!(s=d.next()).done;g++)u(r,g,v?o(d,m,[s.value,g],!0):s.value);return r.length=g,r}})},214:function(e,t,r){"use strict";var n=r(6),s=r(20);e.exports=function(e,t,r){t in e?n.f(e,t,s(0,r)):e[t]=r}},245:function(e,t,r){"use strict";var n=r(210),s=r.n(n),a=r(26),o=r.n(a),i=r(46),l=r(77);t.a={name:"newRole",mixins:[l.a.cacheMixin],data:function(){var e=this,t=function(t,r,n){0==e.prole.resource.length?n(new Error("请勾选权限控制")):n()};return{cacheField:["prole"],isJustSee:!1,isSee:!0,isEdit:!1,isShowCheckbox:!0,level:"新建角色",id:null,data5:[],prole:{name:null,status:"1",remark:null,resource:[]},rules:{name:[{validator:function(e,t,r){var n=/^[\u4E00-\u9FA5A-Za-z0-9]{1,20}$/;if(!t)return r(new Error("角色名称不能为空"));n.test(t)?r():r(new Error("请输入字母、数字或者汉字，长度在20个字符以内"))},required:!0,trigger:"blur"}],status:[{required:!0,message:"请选择角色状态",trigger:"blur"}],remark:[{validator:function(e,t,r){var n=/^[\u4E00-\u9FA5A-Za-z0-9\s\·\~\！\@\#\￥\%\……\&\*\（\）\——\-\+\=\【\】\{\}\、\|\；\‘\’\：\“\”\《\》\？\，\。\、\`\~\!\#\$\%\^\&\*\(\)\_\[\]{\}\\\|\;\'\'\:\"\"\,\.\/\<\>\?]{1,100}$/;t?n.test(t)?r():r(new Error("请输入字母、数字或者汉字，长度在100个字符以内")):r()},trigger:"blur"}],resource:[{required:!0,validator:t,trigger:"blur"}]},currentPage:1,total:1,size:10,pages:1,name:"",multipleSelection:[],postObj:{menuName:null,productCode:null,productVersion:null,parentId:null},treeData:[],defaultProps:{children:"submenu",label:"menuName"},ids:[],loading:!0}},created:function(){this.getMenu(),this.isEdit=!!this.$route.query.isEdit,this.isJustSee=!!this.$route.query.isJustSee,this.level=this.$route.name},mounted:function(){this.isEdit?(this.isSee=!0,this.isJustSee=!1,this.prole=JSON.parse(localStorage.getItem("roleEdit")),this.prole.status=this.prole.status.toString(),this.getData(this.$route.query.roleUid)):this.isJustSee?(this.isSee=this.isEdit=!1,this.prole=JSON.parse(localStorage.getItem("roleEdit")),this.prole.status=this.prole.status.toString(),this.getData(this.$route.query.roleUid)):(this.isSee=!0,this.isJustSee=this.isEdit=!1)},methods:{getMenu:function(){var e=this;Object(i._5)().then(function(t){t&&200==t.code?(e.loading=!1,e.data5=t.data,e.isJustSee&&e.formateTree(e.data5,function(e){return 0!=e.id})):e.error(t.msg)}).catch(function(){e.error("网络出错，请稍后再试")})},handleCheckChange:function(e,t,r){},formateTree:function(e,t){if(!e||!e.length)return[];var r=[],n=!0,a=!1,i=void 0;try{for(var l,u=o()(e);!(n=(l=u.next()).done);n=!0){var c=l.value;t(c)?(c.disabled=!0,r.push(c),c.submenu=this.formateTree(c.submenu,t)):(c.disabled=!0,r.push.apply(r,s()(this.formateTree(c.children,t))))}}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r},confirmRole:function(e){var t=this,r=this,n=this.prole,s=this.$refs.tree.getCheckedNodes(),a=[];s.forEach(function(e){a.push(e.resourceId)}),this.prole.resource=a,this.$refs[e].validate(function(s){if(!s)return!1;t.isEdit?Object(i.C)({role:n,resourceIds:a}).then(function(n){n.result?(t.$refs[e].clearValidate(),r.success("修改成功"),t.$store.commit("tagNav/removeTagNav",t.$route),t.$router.go(-1)):r.error(n.msg)}).catch(function(){}):Object(i.c)({role:n,resourceIds:a}).then(function(n){n.result?(t.$refs[e].clearValidate(),r.success("新建成功"),t.$store.commit("tagNav/removeTagNav",t.$route),t.$router.go(-1)):r.error(n.msg)}).catch(function(){})})},getData:function(e){var t=this;Object(i._6)(e).then(function(e){e&&200==e.code&&(t.ids=e.data.productMenuIds,t.$refs.tree.setCheckedKeys(t.ids))}).catch(function(){})},getCheckedNodes:function(){this.flag=!1,this.form.orgUid=this.$refs.tree.getCheckedNodes()[0].text},out:function(){this.$store.commit("tagNav/removeTagNav",this.$route),this.$router.go(-1)}}}},371:function(e,t,r){var n=r(372);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(167)("ea1a4bce",n,!0,{})},372:function(e,t,r){t=e.exports=r(166)(!0),t.push([e.i,"\n.content-wrapper[data-v-920c982c] {\n  height: 100%;\n}\n.content-wrapper .el-tree[data-v-920c982c] {\n    max-height: 500px;\n    overflow-y: scroll;\n}\n","",{version:3,sources:["G:/Workspaces/open/vue-module/base/src/views/sysMange/roleManage/newRole.vue"],names:[],mappings:";AACA;EACE,aAAa;CACd;AACD;IACI,kBAAkB;IAClB,mBAAmB;CACtB",file:"newRole.vue",sourcesContent:["\n.content-wrapper[data-v-920c982c] {\n  height: 100%;\n}\n.content-wrapper .el-tree[data-v-920c982c] {\n    max-height: 500px;\n    overflow-y: scroll;\n}\n"],sourceRoot:""}])},373:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content-wrapper"},[r("div",{staticClass:"form-wrapper"},[r("el-form",{ref:"prole",attrs:{model:e.prole,rules:e.rules,inline:!0,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"角色名称：",prop:"name"}},[r("el-input",{attrs:{placeholder:"",disabled:e.isJustSee},model:{value:e.prole.name,callback:function(t){e.$set(e.prole,"name","string"==typeof t?t.trim():t)},expression:"prole.name"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"auth",rawName:"v-auth",value:"system_roleManage_enableDisabling",expression:"'system_roleManage_enableDisabling'"}],attrs:{label:"状态：",prop:"status"}},[r("el-radio-group",{attrs:{disabled:e.isJustSee},model:{value:e.prole.status,callback:function(t){e.$set(e.prole,"status",t)},expression:"prole.status"}},[r("el-radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("禁用")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"描述：",prop:"remark"}},[r("el-input",{attrs:{disabled:e.isJustSee},model:{value:e.prole.remark,callback:function(t){e.$set(e.prole,"remark",t)},expression:"prole.remark"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"权限设置：",prop:"resource"}},[r("div",{staticClass:"role-tree",staticStyle:{border:"1px solid #ccc",padding:"10px"}},[e.loading?r("div",{staticStyle:{"text-align":"center",color:"#606266"}},[r("i",{staticClass:"el-icon-loading"}),e._v(" "),r("span",[e._v("加载中")])]):r("el-tree",{ref:"tree",attrs:{data:e.data5,"node-key":"id",props:e.defaultProps,"default-expand-all":"","show-checkbox":e.isShowCheckbox,"expand-on-click-node":!1,"default-checked-keys":e.ids},on:{"check-change":e.handleCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,s=t.data;return r("span",{staticClass:"custom-tree-node",class:{"menu-zi-class":2==s.menuType}},[r("span",[r("i",{staticClass:"iconfont",class:{"icon-neiye-kedanjia":1==s.menuType,"neiye-kedanjia":2==s.menuType,caidan:3==s.menuType}}),e._v("\n                "+e._s(n.label)+"\n              ")])])}}])})],1)]),e._v(" "),r("el-form-item",{staticStyle:{width:"100%","text-align":"center"}},[e.isSee?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmRole("prole",!1)}}},[e._v("保存")]):e._e(),e._v(" "),e.isSee?r("el-button",{on:{click:e.out}},[e._v("取消")]):r("el-button",{attrs:{type:"primary"},on:{click:e.out}},[e._v("返回")])],1)],1)],1)])},s=[],a={render:n,staticRenderFns:s};t.a=a},57:function(e,t,r){"use strict";function n(e){r(371)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(245),a=r(373),o=r(208),i=n,l=o(s.a,a.a,!1,i,"data-v-920c982c",null);t.default=l.exports}});