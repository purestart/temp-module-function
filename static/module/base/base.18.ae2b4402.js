webpackJsonpbase([18],{200:function(e,n,t){"use strict";function s(e){t(466),t(468)}Object.defineProperty(n,"__esModule",{value:!0});var a=t(266),i=t(470),r=t(208),o=s,l=r(a.a,i.a,!1,o,"data-v-0bb12d2e",null);n.default=l.exports},208:function(e,n){e.exports=function(e,n,t,s,a,i){var r,o=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(r=e,o=e.default);var d="function"==typeof o?o.options:o;n&&(d.render=n.render,d.staticRenderFns=n.staticRenderFns,d._compiled=!0),t&&(d.functional=!0),a&&(d._scopeId=a);var p;if(i?(p=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=p):s&&(p=s),p){var u=d.functional,c=u?d.render:d.beforeCreate;u?(d._injectStyles=p,d.render=function(e,n){return p.call(n),c(e,n)}):d.beforeCreate=c?[].concat(c,p):[p]}return{esModule:r,exports:o,options:d}}},266:function(e,n,t){"use strict";var s=t(46);n.a={name:"messageDistributionAdd",data:function(){var e=function(e,n,t){for(var s=/^(1[3|4|5|6|7|8|9]\d{9})*$/,a=n.split(","),i=!0,r="",o={},l=0;l<a.length;l++)0==s.test(a[l])&&(i=!1);for(var d=0;d<a.length;d++)0==s.test(a[d])?r+=a[d]+"、":o[a[d]]=!0;""==n.toString().trim()?t(new Error("请输入手机号")):i?n&&n.length&&","==n.substring(n.toString().length-1,n.toString().length)?t(new Error('最后一个手机号后面请不要以","结尾')):t():t(new Error(r.substring(0,r.length-1)+" 手机号格式不正确！"))},n=function(e,n,t){for(var s="",a={},i=n.split(","),r=0;r<i.length;r++)a[i[r]]?s+=i[r]+"、":a[i[r]]=!0;""!=s?t(new Error(s.substring(0,s.length-1)+"存在重复！")):t()},t=function(e,n,t){var s=/^[\u4e00-\u9fa50-9a-zA-Z\s\~\`\·\！\!\@\#\￥\%\^\……\&\*\（\）\——\-\+\=\【\】\{\}\|\、\\\：\；\:\;\“\”\‘\’\'\"\[\]\{\}\<\,\>\.\《\》\，\。\？\、\?\/\(\)\_]+$/;null==n&&(n=""),""==n.toString().replace(/\s/g,"")?t(new Error("短信内容不能为空")):s.test(n.toString().trim())?t():t(new Error("输入的短信含有不合法字符"))};return{templateBread:"",sendType:"1",listLoading:!1,tableKey:1,sceneCodes:[],isModify:!1,sendDebouce:!1,isJustSee:!1,seceneParam:"",contentMsg:"",tempalteShowText:"",messageDistribution:{mobiles:"",content:"",batchTitle:""},rules:{mobiles:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"},{validator:n,trigger:"blur"}],seceneParam:[{required:!0,message:"请先选择短信场景",trigger:"blur"}],content:[{required:!0,message:"请输入短信内容",trigger:"blur"},{validator:function(e,n,t){if(n.length>500)return t(new Error("短信内容字符数最多500个"));t()},trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{handleClick:function(e,n){console.log(e,n)},mobilesFunc:function(){},seceneParamFunc:function(e){console.log(e),this.messageDistribution.content=this.messageDistribution.content+"{"+e.paramCode+"}"},sendMessage:function(){var e=this;this.sendDebouce=!0,this.$refs.messageDistribution.validate(function(n){if(n){if(null==e.messageDistribution.phone||void 0==e.messageDistribution.phone||""==e.messageDistribution.phone)return void e.error("请输入手机号");if(11!=e.messageDistribution.phone.length)return void e.error("手机号格式不正确");e.messageDistribution.phone,e.messageDistribution.content}})},closeDialog:function(){this.dialogFormVisible=!1},submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return!1;var t=n.messageDistribution;Object(s._10)(t).then(function(e){e.result?(n.$store.commit("tagNav/removeTagNav",n.$route),n.success("短信发送成功"),n.$router.push("/sys/message/distribution")):n.error(e.msg)}).catch(function(e){console.log(e)})})},out:function(){this.$store.commit("tagNav/removeTagNav",this.$route),this.$router.push("/sys/message/distribution")},templateTextareaFunc:function(){var e=/\{(.+?)\}/g,n=this.messageDistribution.content,t=n.match(e);console.log(t,1);var s=(this.tempalteShowText,[]);if(t){for(var a=0;a<t.length;a++){var i=t[a].slice(1,t[a].length-1);s.push(i)}var r=[];console.log(r)}this.messageDistribution.seceneParam},templateFunc:function(e){console.log(e);var n=this.sceneCodes.filter(function(n){return n.sceneCode==e});this.messageDistribution.seceneParam=n&&n[0]&&n[0].paramList,console.log(n[0]),this.messageDistribution.sceneName=n&&n[0]&&n[0].sceneName,this.messageDistribution.sceneCode=n&&n[0]&&n[0].sceneCode,this.messageDistribution.templateName=n&&n[0]&&n[0].sceneName,this.messageDistribution.templateCode=n&&n[0]&&n[0].sceneCode;for(var t=n&&n[0]&&n[0].paramList,s="【大地电影】购买成功，",a="【大地电影】购买成功，",i=0;i<t.length;i++)s+=t[i].paramName+":{",s+=t[i].paramCode+"}",a+=t[i].paramName+":",a+=t[i].sample;this.messageDistribution.content=s,this.tempalteShowText=a},unique:function(e){for(var n=[e[0]],t=1;t<e.length;t++)-1==n.indexOf(e[t])&&n.push(e[t]);return n},addContact:function(){this.$refs;this.$refs.tableDataRef,this.dialogFormVisible=!0}},created:function(){this.isModify="true"==this.$route.query.isModify||1==this.$route.query.isModify,this.isJustSee="true"==this.$route.query.isJustSee||1==this.$route.query.isJustSee,this.isModify&&(this.isJustSee||(this.templateBread="编辑短信模板")),this.isModify||(this.templateBread="新建短信模板")}}},466:function(e,n,t){var s=t(467);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t(167)("bf48d484",s,!0,{})},467:function(e,n,t){n=e.exports=t(166)(!0),n.push([e.i,"\n.page-justsee-message-channel .el-form-item__label {\n  font-size: 12px;\n  line-height: 30px;\n}\n.page-justsee-message-channel .el-input__inner {\n  font-size: 12px;\n}\n.page-justsee-message-channel .el-textarea__inner {\n  font-size: 12px;\n}\n.page-justsee-message-channel input::-webkit-input-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel input::-moz-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel input::-ms-input-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel textarea::-webkit-textarea-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel textarea::-webkit-textarea-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel textarea::-webkit-textarea-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel .temp-content .el-textarea.is-disabled .el-textarea__inner {\n  border: 1px solid #bcbcbc;\n}\n.page-justsee-message-channel .just-see-checkbox span {\n  margin-right: 6px;\n}\n.page-justsee-message-channel .el-date-editor.is-disabled .el-icon-date {\n  display: none;\n}\n.page-justsee-message-channel .el-textarea.is-disabled .el-textarea__inner {\n  border-color: transparent;\n  background-color: transparent;\n  cursor: text;\n  color: #808080;\n  border: 0 none;\n  padding-top: 10px;\n}\n.page-justsee-message-channel .el-checkbox {\n  margin-left: 0;\n  margin-right: 30px;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner {\n  border-color: transparent;\n  background-color: transparent;\n  cursor: text;\n  color: #808080;\n  padding: 0;\n  border: 0 none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:link {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:visited {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:hover {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:active {\n    border: none;\n}\n.page-justsee-message-channel .normal-text {\n  color: #808080;\n  padding: 0;\n}\n.page-justsee-message-channel .no-anchor .el-input__suffix {\n  display: none;\n}\n.page-justsee-message-channel .el-form-item__content {\n  color: #808080;\n}\n","",{version:3,sources:["G:/Workspaces/open/vue-module/base/src/views/sysMange/messageDistribution/send.vue"],names:[],mappings:";AACA;EACE,gBAAgB;EAChB,kBAAkB;CACnB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,kBAAkB;CACnB;AACD;EACE,cAAc;CACf;AACD;EACE,0BAA0B;EAC1B,8BAA8B;EAC9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,kBAAkB;CACnB;AACD;EACE,eAAe;EACf,mBAAmB;CACpB;AACD;EACE,0BAA0B;EAC1B,8BAA8B;EAC9B,aAAa;EACb,eAAe;EACf,WAAW;EACX,eAAe;CAChB;AACD;IACI,aAAa;CAChB;AACD;IACI,aAAa;CAChB;AACD;IACI,aAAa;CAChB;AACD;IACI,aAAa;CAChB;AACD;EACE,eAAe;EACf,WAAW;CACZ;AACD;EACE,cAAc;CACf;AACD;EACE,eAAe;CAChB",file:"send.vue",sourcesContent:["\n.page-justsee-message-channel .el-form-item__label {\n  font-size: 12px;\n  line-height: 30px;\n}\n.page-justsee-message-channel .el-input__inner {\n  font-size: 12px;\n}\n.page-justsee-message-channel .el-textarea__inner {\n  font-size: 12px;\n}\n.page-justsee-message-channel input::-webkit-input-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel input::-moz-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel input::-ms-input-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel textarea::-webkit-textarea-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel textarea::-webkit-textarea-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel textarea::-webkit-textarea-placeholder {\n  font-size: 12px;\n}\n.page-justsee-message-channel .temp-content .el-textarea.is-disabled .el-textarea__inner {\n  border: 1px solid #bcbcbc;\n}\n.page-justsee-message-channel .just-see-checkbox span {\n  margin-right: 6px;\n}\n.page-justsee-message-channel .el-date-editor.is-disabled .el-icon-date {\n  display: none;\n}\n.page-justsee-message-channel .el-textarea.is-disabled .el-textarea__inner {\n  border-color: transparent;\n  background-color: transparent;\n  cursor: text;\n  color: #808080;\n  border: 0 none;\n  padding-top: 10px;\n}\n.page-justsee-message-channel .el-checkbox {\n  margin-left: 0;\n  margin-right: 30px;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner {\n  border-color: transparent;\n  background-color: transparent;\n  cursor: text;\n  color: #808080;\n  padding: 0;\n  border: 0 none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:link {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:visited {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:hover {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:active {\n    border: none;\n}\n.page-justsee-message-channel .normal-text {\n  color: #808080;\n  padding: 0;\n}\n.page-justsee-message-channel .no-anchor .el-input__suffix {\n  display: none;\n}\n.page-justsee-message-channel .el-form-item__content {\n  color: #808080;\n}\n"],sourceRoot:""}])},468:function(e,n,t){var s=t(469);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t(167)("662818e4",s,!0,{})},469:function(e,n,t){n=e.exports=t(166)(!0),n.push([e.i,"\n.page-distribution-content .el-row[data-v-0bb12d2e]:last-child {\n  margin-bottom: 0;\n}\n.page-distribution-content .el-form-item.margin-bottom0[data-v-0bb12d2e] {\n  margin-bottom: 0;\n}\n.page-distribution-content .el-form-item[data-v-0bb12d2e] {\n  margin-bottom: 21px;\n}\n.page-distribution-content .el-form-item.margin-bottom6[data-v-0bb12d2e] {\n  margin-bottom: 6px;\n}\n.page-distribution-content .el-col[data-v-0bb12d2e] {\n  border-radius: 4px;\n}\n.page-distribution-content .bg-purple-dark[data-v-0bb12d2e] {\n  background: #99a9bf;\n}\n.page-distribution-content .bg-purple[data-v-0bb12d2e] {\n  background: #d3dce6;\n}\n.page-distribution-content .bg-purple-light[data-v-0bb12d2e] {\n  background: #e5e9f2;\n}\n.page-distribution-content .grid-content[data-v-0bb12d2e] {\n  border-radius: 4px;\n  min-height: 36px;\n}\n.page-distribution-content .row-bg[data-v-0bb12d2e] {\n  padding: 10px 0;\n  background-color: #f9fafc;\n}\n.page-distribution-content .el-table .cell span.table-btn-mini[data-v-0bb12d2e] {\n  color: #3b74ff;\n  cursor: pointer;\n  margin-right: 6px;\n}\n.page-distribution-content .scene-btn[data-v-0bb12d2e] {\n  color: #3b74ff;\n  border: 1px solid #3b74ff;\n  border-radius: 4px;\n  padding-left: 12px;\n  padding-right: 12px;\n  height: 28px;\n  line-height: 28px;\n  font-size: 12px;\n  cursor: pointer;\n}\n.template-box .left[data-v-0bb12d2e] {\n  float: left;\n}\n.template-box .right[data-v-0bb12d2e] {\n  float: right;\n}\n.template-demo-text[data-v-0bb12d2e] {\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  padding-bottom: 8px;\n  min-height: 32px;\n}\n.scene-btn[data-v-0bb12d2e] {\n  float: left;\n  margin-right: 6px;\n}\n","",{version:3,sources:["G:/Workspaces/open/vue-module/base/src/views/sysMange/messageDistribution/send.vue"],names:[],mappings:";AACA;EACE,iBAAiB;CAClB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,mBAAmB;EACnB,iBAAiB;CAClB;AACD;EACE,gBAAgB;EAChB,0BAA0B;CAC3B;AACD;EACE,eAAe;EACf,gBAAgB;EAChB,kBAAkB;CACnB;AACD;EACE,eAAe;EACf,0BAA0B;EAC1B,mBAAmB;EACnB,mBAAmB;EACnB,oBAAoB;EACpB,aAAa;EACb,kBAAkB;EAClB,gBAAgB;EAChB,gBAAgB;CACjB;AACD;EACE,YAAY;CACb;AACD;EACE,aAAa;CACd;AACD;EACE,uBAAuB;EACvB,mBAAmB;EACnB,oBAAoB;EACpB,iBAAiB;CAClB;AACD;EACE,YAAY;EACZ,kBAAkB;CACnB",file:"send.vue",sourcesContent:["\n.page-distribution-content .el-row[data-v-0bb12d2e]:last-child {\n  margin-bottom: 0;\n}\n.page-distribution-content .el-form-item.margin-bottom0[data-v-0bb12d2e] {\n  margin-bottom: 0;\n}\n.page-distribution-content .el-form-item[data-v-0bb12d2e] {\n  margin-bottom: 21px;\n}\n.page-distribution-content .el-form-item.margin-bottom6[data-v-0bb12d2e] {\n  margin-bottom: 6px;\n}\n.page-distribution-content .el-col[data-v-0bb12d2e] {\n  border-radius: 4px;\n}\n.page-distribution-content .bg-purple-dark[data-v-0bb12d2e] {\n  background: #99a9bf;\n}\n.page-distribution-content .bg-purple[data-v-0bb12d2e] {\n  background: #d3dce6;\n}\n.page-distribution-content .bg-purple-light[data-v-0bb12d2e] {\n  background: #e5e9f2;\n}\n.page-distribution-content .grid-content[data-v-0bb12d2e] {\n  border-radius: 4px;\n  min-height: 36px;\n}\n.page-distribution-content .row-bg[data-v-0bb12d2e] {\n  padding: 10px 0;\n  background-color: #f9fafc;\n}\n.page-distribution-content .el-table .cell span.table-btn-mini[data-v-0bb12d2e] {\n  color: #3b74ff;\n  cursor: pointer;\n  margin-right: 6px;\n}\n.page-distribution-content .scene-btn[data-v-0bb12d2e] {\n  color: #3b74ff;\n  border: 1px solid #3b74ff;\n  border-radius: 4px;\n  padding-left: 12px;\n  padding-right: 12px;\n  height: 28px;\n  line-height: 28px;\n  font-size: 12px;\n  cursor: pointer;\n}\n.template-box .left[data-v-0bb12d2e] {\n  float: left;\n}\n.template-box .right[data-v-0bb12d2e] {\n  float: right;\n}\n.template-demo-text[data-v-0bb12d2e] {\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  padding-bottom: 8px;\n  min-height: 32px;\n}\n.scene-btn[data-v-0bb12d2e] {\n  float: left;\n  margin-right: 6px;\n}\n"],sourceRoot:""}])},470:function(e,n,t){"use strict";var s=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"page-wrapper page-distribution-send"},[t("div",{staticClass:"clearboth",staticStyle:{"margin-top":"30px"}}),e._v(" "),t("section",{staticClass:"page-distribution-content"},[t("el-form",{ref:"messageDistribution",attrs:{model:e.messageDistribution,rules:e.rules,"label-width":"110px","label-position":"right","label-height":"60px"}},[e.isJustSee?e._e():t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:18}},[t("el-form-item",{staticClass:"margin-bottom6",attrs:{label:"短信标题：",prop:"batchTitle"}},[t("el-input",{staticStyle:{width:"480px"},model:{value:e.messageDistribution.batchTitle,callback:function(n){e.$set(e.messageDistribution,"batchTitle","string"==typeof n?n.trim():n)},expression:"messageDistribution.batchTitle"}})],1)],1)],1),e._v(" "),e.isJustSee?e._e():t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:18}},[t("el-form-item",{attrs:{label:"手机号：",prop:"mobiles"}},[t("el-radio-group",{attrs:{disabled:e.isModify},model:{value:e.sendType,callback:function(n){e.sendType=n},expression:"sendType"}},[t("el-radio",{attrs:{label:"1"}},[e._v("批量")])],1),e._v(" "),t("div",[t("el-input",{staticStyle:{width:"480px"},attrs:{type:"textarea",resize:"none",rows:"5",disabled:e.isJustSee,placeholder:"多个手机号多个半角逗号隔开"},on:{blur:e.mobilesFunc},model:{value:e.messageDistribution.mobiles,callback:function(n){e.$set(e.messageDistribution,"mobiles",n)},expression:"messageDistribution.mobiles"}})],1)],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{staticClass:"temp-content",attrs:{span:18}},[t("el-form-item",{attrs:{label:"短信内容：",prop:"content"}},[t("el-input",{staticStyle:{width:"480px"},attrs:{type:"textarea",resize:"none",rows:"5",disabled:e.isJustSee,placeholder:""},on:{input:e.templateTextareaFunc,blur:e.templateTextareaFunc},model:{value:e.messageDistribution.content,callback:function(n){e.$set(e.messageDistribution,"content",n)},expression:"messageDistribution.content"}})],1)],1)],1),e._v(" "),e._e()],1),e._v(" "),t("div",{staticClass:"btn",staticStyle:{margin:"20px auto","text-align":"center"}},[e.isModify||e.isJustSee?e._e():t("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.submitForm("messageDistribution")}}},[e._v("确认发送")]),e._v(" "),e.isJustSee?e._e():t("el-button",{on:{click:e.out}},[e._v("取消")]),e._v(" "),e.isJustSee?t("el-button",{on:{click:e.out}},[e._v("返回")]):e._e()],1)],1)])},a=[],i={render:s,staticRenderFns:a};n.a=i}});