webpackJsonpbase([10],{185:function(e,t,n){"use strict";function a(e){n(377),n(379)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(247),r=n(381),s=n(208),o=a,l=s(i.a,r.a,!1,o,"data-v-5881393b",null);t.default=l.exports},208:function(e,t){e.exports=function(e,t,n,a,i,r){var s,o=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(s=e,o=e.default);var u="function"==typeof o?o.options:o;t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId=i);var c;if(r?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=c):a&&(c=a),c){var p=u.functional,d=p?u.render:u.beforeCreate;p?(u._injectStyles=c,u.render=function(e,t){return c.call(t),d(e,t)}):u.beforeCreate=d?[].concat(d,c):[c]}return{esModule:s,exports:o,options:u}}},247:function(e,t,n){"use strict";var a=n(18),i=n.n(a),r=n(46),s=n(77);t.a={name:"userList",mixins:[s.a.cacheMixin],data:function(){return{cacheField:["userList","currentPage","pageSize","formInline"],statusArr:[{value:"",label:"全部"},{value:"0",label:"启用"},{value:"1",label:"禁用"},{value:"2",label:"离职"}],total:1,currentPage:1,pageSize:10,orgTreeList:[],formInline:{loginName:"",fullName:"",status:"",orgUid:"",orgName:"全部",attributeType:""},orgArr:[],userList:[],dialogVisible:!1,resetVisible:!1,status:"",attributeArr:[],defaultProps:{children:"children",label:"text"}}},activated:function(){this.getUserList()},created:function(){this.getAttribute(),this.getUserList(),this.getOrgTreeList()},filters:{attributeFilter:function(e){if(!e)return"";var t=JSON.parse(sessionStorage.getItem("attribute"));return t?t.map(function(t){if(t.propertyCode==e)return t.propertyName}).join().replace(/,/g,""):void 0}},methods:{clear:function(){this.formInline.orgName=this.formInline.orgUid=""},to:function(){this.$router.push("newUser")},editUser:function(e){this.$router.push("editUser"),localStorage.setItem("onlyUser",e.uid)},diaPwd:function(e){this.resetVisible=!0,this.uid=e.uid},resetPwd:function(){var e=this,t=this;Object(r._3)(this.uid).then(function(n){n&&200==n.code&&(e.resetVisible=!1,e.uid="",t.$message({message:"重置密码成功",type:"success"}))}).catch(function(){})},chooseStatus:function(e){var t=this;this.statusArr.map(function(n,a){n.value===e&&(t.status=t.statusArr[a].value)})},getUserList:function(){var e=this,t={pageNum:this.currentPage,pageSize:this.pageSize,loginName:this.formInline.loginName,fullName:this.formInline.fullName,status:this.status,orgUid:this.formInline.orgUid,attributeType:this.formInline.attributeType};Object(r._18)(t).then(function(t){t&&200==t.code?(e.pageNum=t.data.pageNum,e.pageSize=t.data.pageSize,e.total=t.data.total,e.userList=t.data.rows):e.$message({message:t.msg,type:"info"})}).catch(function(){e.$message("网络繁忙，请稍后再试")})},getOrgTreeList:function(){var e=this;Object(r.R)().then(function(t){t&&200==t.code?e.orgArr=t.data:e.error(t.msg)}).catch(function(){})},getAttribute:function(){var e=this;Object(r.f)().then(function(t){t&&200==t.code?(t.data&&sessionStorage.setItem("attribute",i()(t.data)),e.attributeArr=t.data,e.attributeArr.unshift({propertyCode:"",propertyName:"全部"})):e.error(t.msg)}).catch(function(){})},handleNodeClick:function(e){this.formInline.orgUid=e.id,this.formInline.orgName=e.text},handleClick:function(e){localStorage.setItem("usDetail_uid",e.uid),this.$router.push("userDetail")},onSubmit:function(){this.getUserList()},handleCurrentChange:function(e){this.currentPage=e,this.getUserList()},handleSizeChange:function(e){this.pageSize=e,this.getUserList()}}}},377:function(e,t,n){var a=n(378);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(167)("33337dca",a,!0,{})},378:function(e,t,n){t=e.exports=n(166)(!0),t.push([e.i,"\n.el-input--mini .el-input__inner {\n  height: 32px;\n  line-height: 32px;\n}\n","",{version:3,sources:["G:/Workspaces/open/vue-module/base/src/views/sysMange/userManage/userList.vue"],names:[],mappings:";AACA;EACE,aAAa;EACb,kBAAkB;CACnB",file:"userList.vue",sourcesContent:["\n.el-input--mini .el-input__inner {\n  height: 32px;\n  line-height: 32px;\n}\n"],sourceRoot:""}])},379:function(e,t,n){var a=n(380);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(167)("8292e478",a,!0,{})},380:function(e,t,n){t=e.exports=n(166)(!0),t.push([e.i,"\n.content-wrapper[data-v-5881393b] {\n  height: 100%;\n}\n.content-wrapper .list-wrapper .form .el-form-item--mini.el-form-item[data-v-5881393b] {\n    margin-bottom: 8px;\n}\n.content-wrapper .list-wrapper .form .el-input[data-v-5881393b] {\n    width: 192px;\n    height: 32px;\n}\n.content-wrapper .list-wrapper .form .el-button[data-v-5881393b] {\n    width: 80px;\n    height: 32px;\n}\n.content-wrapper .list-wrapper .create-wrapper[data-v-5881393b] {\n    width: 100%;\n    height: 32px;\n    margin: 10px 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.content-wrapper .list-wrapper .newBuild[data-v-5881393b] {\n    width: 100%;\n    height: 60px;\n    background-color: #ccc;\n    border-top: #8b8b8b;\n}\n","",{version:3,sources:["G:/Workspaces/open/vue-module/base/src/views/sysMange/userManage/userList.vue"],names:[],mappings:";AACA;EACE,aAAa;CACd;AACD;IACI,mBAAmB;CACtB;AACD;IACI,aAAa;IACb,aAAa;CAChB;AACD;IACI,YAAY;IACZ,aAAa;CAChB;AACD;IACI,YAAY;IACZ,aAAa;IACb,eAAe;IACf,qBAAqB;IACrB,qBAAqB;IACrB,cAAc;IACd,sBAAsB;QAClB,mBAAmB;YACf,0BAA0B;IAClC,0BAA0B;QACtB,uBAAuB;YACnB,oBAAoB;CAC/B;AACD;IACI,YAAY;IACZ,aAAa;IACb,uBAAuB;IACvB,oBAAoB;CACvB",file:"userList.vue",sourcesContent:["\n.content-wrapper[data-v-5881393b] {\n  height: 100%;\n}\n.content-wrapper .list-wrapper .form .el-form-item--mini.el-form-item[data-v-5881393b] {\n    margin-bottom: 8px;\n}\n.content-wrapper .list-wrapper .form .el-input[data-v-5881393b] {\n    width: 192px;\n    height: 32px;\n}\n.content-wrapper .list-wrapper .form .el-button[data-v-5881393b] {\n    width: 80px;\n    height: 32px;\n}\n.content-wrapper .list-wrapper .create-wrapper[data-v-5881393b] {\n    width: 100%;\n    height: 32px;\n    margin: 10px 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.content-wrapper .list-wrapper .newBuild[data-v-5881393b] {\n    width: 100%;\n    height: 60px;\n    background-color: #ccc;\n    border-top: #8b8b8b;\n}\n"],sourceRoot:""}])},381:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"list-wrapper"},[n("div",{staticClass:"form"},[n("el-form",{attrs:{inline:!0,model:e.formInline,size:"mini","label-width":"100px"}},[n("el-form-item",{attrs:{label:"用户账号：",prop:"loginName"}},[n("el-input",{model:{value:e.formInline.loginName,callback:function(t){e.$set(e.formInline,"loginName","string"==typeof t?t.trim():t)},expression:"formInline.loginName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"用户名称：",prop:"fullName"}},[n("el-input",{model:{value:e.formInline.fullName,callback:function(t){e.$set(e.formInline,"fullName","string"==typeof t?t.trim():t)},expression:"formInline.fullName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"用户属性：",prop:"attributeType"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.attributeType,callback:function(t){e.$set(e.formInline,"attributeType",t)},expression:"formInline.attributeType"}},e._l(e.attributeArr,function(e){return n("el-option",{key:e.propertyCode,attrs:{label:e.propertyName,value:e.propertyCode}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"状态：",prop:"status"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.chooseStatus},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},e._l(e.statusArr,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"所属组织：",prop:"orgName"}},[n("el-input",{staticStyle:{width:"192px"},attrs:{disabled:""},model:{value:e.formInline.orgName,callback:function(t){e.$set(e.formInline,"orgName",t)},expression:"formInline.orgName"}}),e._v(" "),n("el-button",{staticStyle:{padding:"5px 18px 6px"},attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("选择")]),e._v(" "),e.formInline.orgName?n("i",{staticClass:"el-icon-close",staticStyle:{top:"8px",left:"172px",position:"absolute","font-weight":"bolder",color:"#3b74ff","font-size":"medium"},on:{click:e.clear}}):e._e(),e._v(" "),n("el-button",{staticStyle:{padding:"5px 18px 6px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),n("div",{staticClass:"create-wrapper"},[n("el-button",{directives:[{name:"auth",rawName:"v-auth",value:"system_userManage_add",expression:"'system_userManage_add'"}],attrs:{type:"primary"},on:{click:e.to}},[e._v("新建")])],1),e._v(" "),n("div",{staticClass:"table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,stripe:""}},[n("el-table-column",{attrs:{prop:"loginName",label:"用户账号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"fullName",label:"用户名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"手机号码"}}),e._v(" "),n("el-table-column",{attrs:{prop:"attributeType",label:"用户属性"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("attributeFilter")(t.row.attributeType)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(0==t.row.status?"启用":1==t.row.status?"禁用":"离职"))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"organization",label:"所属组织"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.organization.name))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"auth",rawName:"v-auth",value:"system_userManage_see",expression:"'system_userManage_see'"}],staticClass:"table-btn-mini",attrs:{type:"text"},on:{click:function(n){return e.handleClick(t.row)}}},[e._v("查看")]),e._v(" "),n("el-button",{directives:[{name:"auth",rawName:"v-auth",value:"system_userManage_update",expression:"'system_userManage_update'"}],staticClass:"table-btn-mini",attrs:{type:"text"},on:{click:function(n){return e.editUser(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{directives:[{name:"auth",rawName:"v-auth",value:"system_userManage_reSetPs",expression:"'system_userManage_reSetPs'"}],staticClass:"table-btn-mini",attrs:{type:"text"},on:{click:function(n){return e.diaPwd(t.row)}}},[e._v("重置密码")])]}}])})],1),e._v(" "),n("div",{staticClass:"page-wrap"},[n("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,25,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)]),e._v(" "),n("div",{staticClass:"diaWindow"},[n("el-dialog",{attrs:{title:"选择组织",visible:e.dialogVisible,width:"448px","lock-scroll":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"divider"}),e._v(" "),n("el-tree",{ref:"tree",attrs:{data:e.orgArr,"node-key":"id","expand-on-click-node":!1,"default-expand-all":"","highlight-current":!0,props:e.defaultProps},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=(t.node,t.data);return n("span",{staticClass:"custom-tree-node"},[n("span",{staticClass:"org-button"},[n("i",{staticClass:"iconfont",class:{"icon-neiye-zongbu":"总部"==a.text,"icon-neiye-zuzhi":0==a.isCinema,"icon-neiye-quyu":1==a.isCinema}},[e._v("\n              "+e._s(a.text)+"\n            ")])])])}}])}),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1),e._v(" "),n("div",{staticClass:"divider"})],1),e._v(" "),n("el-dialog",{attrs:{title:"提示",visible:e.resetVisible,width:"30%"},on:{"update:visible":function(t){e.resetVisible=t}}},[n("i",{staticClass:"el-icon-warning",staticStyle:{"font-size":"30px",color:"#3B74FF"}}),e._v(" "),n("span",[e._v("确定重置此员工密码？")]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.resetPwd}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:function(t){e.resetVisible=!1}}},[e._v("取 消")])],1)])],1)])},i=[],r={render:a,staticRenderFns:i};t.a=r}});